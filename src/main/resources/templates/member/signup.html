<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/layout/memberLayout.html}">



<!--ë‚´ìš© ì‹œì‘-->
    <main id="member" layout:fragment="content">

        <script>
            window.onload = function () {
                const agree1 = document.getElementsByName('agree1')[0];
                const agree2 = document.getElementsByName('agree2')[0];
                const agree3 = document.getElementsByName('agree3')[0];
                const userPromo = document.getElementsByName('userPromo')[0];
                const agree = document.getElementsByClassName('agree')[0];


                agree.onclick = () => {

                    if (agree1.checked && agree2.checked && agree3.checked) {
                        // ì¼ë°˜ ìœ ì € vs íŒë§¤ ìœ ì €
                        const userRole = document.getElementsByName('role')[0];
                        console.log(userRole.value);
                        if (userRole.value === 'USER') {
                            // íšŒì›ê°€ì… í˜ì´ì§€ ì ‘ê·¼ì„ ë§‰ê¸° ìœ„í•œ ì¿ í‚¤ ìƒì„±
                            makeCookie('USER', 'true', 1);

                            if (userPromo.checked) {
                                let userPromovalue = "Y"
                                window.location.href = "/lotteon/member/register?userPromo="+userPromovalue;
                            } else {
                                let userPromovalue = "N"
                                window.location.href = "/lotteon/member/register?userPromo=" + userPromovalue;
                            }
                        } else if (userRole.value === 'SELLER') {
                            // íšŒì›ê°€ì… í˜ì´ì§€ ì ‘ê·¼ì„ ë§‰ê¸° ìœ„í•œ ì¿ í‚¤ ìƒì„±
                            makeCookie('SELLER', 'true', 1);

                            if (userPromo.checked) {
                                let userPromovalue = "Y"
                                window.location.href = "/lotteon/member/registerSeller?userPromo=" + userPromovalue;
                            } else {
                                let userPromovalue = "N"
                                window.location.href = "/lotteon/member/registerSeller?userPromo=" + userPromovalue;
                            }
                        }
                    }else {
                        // í™•ì¸ ëŒ€í™”ìƒì í‘œì‹œ
                        alert("ğŸš¨ì²´í¬í•­ëª© 1, 2, 3ë²ˆì€ í•„ìˆ˜í•­ëª©ì…ë‹ˆë‹¤");
                    }
                }
            }

            // ì¿ í‚¤ ìƒì„±
            function makeCookie(name, value, days) {
                document.cookie = `register=${name}`;
            }
        </script>

        <div class="signup">

            <nav>
                <h1>ì•½ê´€ë™ì˜</h1>
                <input type="hidden" name="role" th:value="${userDTO.userRole}">
            </nav>
            <section>
                <th:block th:if="${userDTO.userRole} == 'USER'">
                <h3><span class="essential">(í•„ìˆ˜)</span>ì¼€ì´ë§ˆì¼“ ì¼ë°˜ íšŒì› ì´ìš©ì•½ê´€</h3>
                <textarea class="terms"  readonly>[[${termsDTO.buyer}]]</textarea>
                <label><input type="checkbox" name="agree1" />ë™ì˜í•©ë‹ˆë‹¤.</label>
                </th:block>

                <th:block th:if="${userDTO.userRole} == 'SELLER'">
                    <h3><span class="essential">(í•„ìˆ˜)</span>ì¼€ì´ë§ˆì¼“ íŒë§¤ íšŒì› ì´ìš©ì•½ê´€</h3>
                    <textarea class="terms"  readonly>[[${termsDTO.seller}]]</textarea>
                    <label><input type="checkbox" name="agree1" />ë™ì˜í•©ë‹ˆë‹¤.</label>
                </th:block>

                <h3><span class="essential">(í•„ìˆ˜)</span>ì „ìê¸ˆìœµê±°ë˜ ì´ìš©ì•½ê´€</h3>
                <textarea class="financial" readonly>[[${termsDTO.finance}]]</textarea>
                <label><input type="checkbox" name="agree2" />ë™ì˜í•©ë‹ˆë‹¤.</label>

                <h3><span class="essential">(í•„ìˆ˜)</span>ê°œì¸ì •ë³´ ìˆ˜ì§‘ë™ì˜</h3>
                <textarea class="privacy" readonly>[[${termsDTO.privacy}]]</textarea>
                <label><input type="checkbox" name="agree3" />ë™ì˜í•©ë‹ˆë‹¤.</label>
            </section>

            <section>
                <h3><span class="optional">(ì„ íƒ)</span>ìœ„ì¹˜ì •ë³´ ì´ìš©ì•½ê´€</h3>
                <textarea class="location" readonly>[[${termsDTO.location}]]</textarea>
                <label><input type="checkbox" name="userPromo" value="Y"/>ë™ì˜í•©ë‹ˆë‹¤.</label>
            </section>

            <div>
                <input type="button" class="agree" value="ë™ì˜í•˜ê¸°" />
            </div>
        </div>
    </main>
<!--ë‚´ìš© ë-->
</html>